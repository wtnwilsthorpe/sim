<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Condensed Atomic Model Comparator</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* Apply Inter font globally and ensure box-sizing is border-box */
        body {
            font-family: 'Inter', sans-serif;
            box-sizing: border-box;
        }

        /* Basic styling for the element tiles */
        .element-tile {
            transition: all 0.2s;
            cursor: pointer;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        .element-tile:hover:not(.selected) {
            border-color: #9ca3af; /* gray-400 */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }

        /* Styles for the Bohr Model SVG elements */
        .nucleus { fill: #b91c1c; } /* red-700 */
        .electron { fill: #06b6d4; stroke: white; stroke-width: 0.5; } /* cyan-500 */
        .orbit { stroke: #6366f1; stroke-width: 1; fill: none; stroke-dasharray: 4 4; } /* indigo-400 */

        /* Specific classes for selection rings */
        .ring-slot-1 { box-shadow: 0 0 0 4px #fbbf24; border-color: #b45309; } /* yellow-400 ring, yellow-700 border */
        .ring-slot-2 { box-shadow: 0 0 0 4px #4ade80; border-color: #065f46; } /* green-400 ring, green-700 border */
        .ring-both { box-shadow: 0 0 0 4px #fbbf24; border-color: #065f46; } /* yellow ring, green border */

        /* Prevent unwanted highlighting */
        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }
    </style>
</head>
<body class="bg-gray-100 p-2 md:p-4">

    <div id="app" class="max-w-7xl w-full mx-auto flex flex-col items-center">

        <!-- Swap Button (Header/Title removed) -->
        <div class="text-center mb-4 w-full flex justify-center">
            <button id="swap-button"
                class="mt-2 px-4 py-1.5 text-sm bg-indigo-500 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-600 transition-colors disabled:bg-indigo-300"
                disabled>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline mr-1" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M7.332 1.668a1 1 0 011.666 0l2 4a1 1 0 01-1.666 0L8.166 3.332a1 1 0 01-.834 0l-2-4zM2 10a1 1 0 011-1h14a1 1 0 011 1v6a1 1 0 01-1 1H3a1 1 0 01-1-1v-6zM5 13a1 1 0 100 2h10a1 1 0 100-2H5z" />
                </svg>
                Swap Atoms
            </button>
        </div>

        <!-- Main Content Grid: Horizontal on md+ screens (Table: 3 columns, Models: 1 column each) -->
        <main class="w-full">
            <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                
                <!-- 1. Periodic Table Area (3/5 width on md+) -->
                <div class="md:col-span-3">
                    <div id="periodic-table-container" class="bg-white p-3 rounded-xl shadow-lg border-2 border-gray-300 w-full h-full flex flex-col no-select">
                        <div class="flex items-center justify-center mb-3 flex-shrink-0">
                            <h3 class="text-base font-bold text-gray-700 mr-2">
                                Next Selection Target: 
                            </h3>
                            <span id="active-slot-label" class="font-extrabold px-3 py-1 rounded-full text-sm shadow-inner bg-yellow-100 border-yellow-400 text-yellow-700">
                                Slot 1
                            </span>
                        </div>
                        
                        <!-- Table Grid will be rendered here -->
                        <div id="periodic-table-grid" class="overflow-x-auto">
                            <!-- Content generated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- 2. Bohr Model 1 (Slot 1) (1/5 width on md+) -->
                <div class="md:col-span-1 bg-white p-4 rounded-xl shadow-2xl border-t-8 border-yellow-400 flex flex-col items-center">
                    <h2 class="text-xl font-bold text-gray-700 text-center mb-2 md:text-lg">Slot 1</h2>
                    <div id="bohr-model-1" class="w-full h-full flex flex-col items-center">
                        <div class="flex flex-col items-center justify-center w-full h-full text-gray-400 italic min-h-[200px] md:min-h-[250px]">
                            <svg class="w-12 h-12 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 8h16M4 16h16" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4v16" />
                            </svg>
                            <span class="mt-2 text-sm">Select element</span>
                        </div>
                    </div>
                </div>
                
                <!-- 3. Bohr Model 2 (Slot 2) (1/5 width on md+) -->
                <div class="md:col-span-1 bg-white p-4 rounded-xl shadow-2xl border-t-8 border-green-400 flex flex-col items-center">
                     <h2 class="text-xl font-bold text-gray-700 text-center mb-2 md:text-lg">Slot 2</h2>
                    <div id="bohr-model-2" class="w-full h-full flex flex-col items-center">
                        <div class="flex flex-col items-center justify-center w-full h-full text-gray-400 italic min-h-[200px] md:min-h-[250px]">
                            <svg class="w-12 h-12 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 8h16M4 16h16" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4v16" />
                            </svg>
                            <span class="mt-2 text-sm">Select element</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Legend -->
        <div class="mt-4 p-3 bg-gray-200 rounded-lg text-xs text-gray-700 w-full max-w-7xl">
            <h3 class="font-bold mb-1">Key:</h3>
            <ul class="list-disc list-inside space-y-0.5 md:flex md:space-x-8 md:space-y-0">
                <li>**Slot 1 (Yellow):** Current element selection</li>
                <li>**Slot 2 (Green):** Comparison element selection</li>
                <li>**Protons / Nucleus:** Red Circle (Atomic Number)</li>
                <li>**Electrons:** Cyan Dots</li>
            </ul>
        </div>
    </div>

    <script>
        // --- Element Data (Z=1 to Z=36, skipping transition metals) ---
        // Structure: Symbol, Name, Atomic Number (Z), Atomic Mass (Rounded), Electron Shells
        const elementsData = [
            // Period 1
            { s: 'H', n: 'Hydrogen', z: 1, m: 1, shells: [1], group: 1, period: 1, color: 'bg-green-300' },
            { s: 'He', n: 'Helium', z: 2, m: 4, shells: [2], group: 18, period: 1, color: 'bg-indigo-300' },
            // Period 2
            { s: 'Li', n: 'Lithium', z: 3, m: 7, shells: [2, 1], group: 1, period: 2, color: 'bg-red-300' },
            { s: 'Be', n: 'Beryllium', z: 4, m: 9, shells: [2, 2], group: 2, period: 2, color: 'bg-yellow-300' },
            { s: 'B', n: 'Boron', z: 5, m: 11, shells: [2, 3], group: 13, period: 2, color: 'bg-lime-300' },
            { s: 'C', n: 'Carbon', z: 6, m: 12, shells: [2, 4], group: 14, period: 2, color: 'bg-green-600' },
            { s: 'N', n: 'Nitrogen', z: 7, m: 14, shells: [2, 5], group: 15, period: 2, color: 'bg-blue-300' },
            { s: 'O', n: 'Oxygen', z: 8, m: 16, shells: [2, 6], group: 16, period: 2, color: 'bg-pink-300' },
            { s: 'F', n: 'Fluorine', z: 9, m: 19, shells: [2, 7], group: 17, period: 2, color: 'bg-cyan-300' },
            { s: 'Ne', n: 'Neon', z: 10, m: 20, shells: [2, 8], group: 18, period: 2, color: 'bg-indigo-300' },
            // Period 3
            { s: 'Na', n: 'Sodium', z: 11, m: 23, shells: [2, 8, 1], group: 1, period: 3, color: 'bg-red-300' },
            { s: 'Mg', n: 'Magnesium', z: 12, m: 24, shells: [2, 8, 2], group: 2, period: 3, color: 'bg-yellow-300' },
            { s: 'Al', n: 'Aluminium', z: 13, m: 27, shells: [2, 8, 3], group: 13, period: 3, color: 'bg-lime-300' },
            { s: 'Si', n: 'Silicon', z: 14, m: 28, shells: [2, 8, 4], group: 14, period: 3, color: 'bg-green-600' },
            { s: 'P', n: 'Phosphorus', z: 15, m: 31, shells: [2, 8, 5], group: 15, period: 3, color: 'bg-blue-300' },
            { s: 'S', n: 'Sulfur', z: 16, m: 32, shells: [2, 8, 6], group: 16, period: 3, color: 'bg-pink-300' },
            { s: 'Cl', n: 'Chlorine', z: 17, m: 35.5, shells: [2, 8, 7], group: 17, period: 3, color: 'bg-cyan-300' },
            { s: 'Ar', n: 'Argon', z: 18, m: 40, shells: [2, 8, 8], group: 18, period: 3, color: 'bg-indigo-300' },
            // Period 4 (Starts)
            { s: 'K', n: 'Potassium', z: 19, m: 39, shells: [2, 8, 8, 1], group: 1, period: 4, color: 'bg-red-400' },
            { s: 'Ca', n: 'Calcium', z: 20, m: 40, shells: [2, 8, 8, 2], group: 2, period: 4, color: 'bg-yellow-400' },
            // Z=21 to Z=30 (Transition Metals) are skipped
            // Period 4 (P-Block)
            { s: 'Ga', n: 'Gallium', z: 31, m: 70, shells: [2, 8, 18, 3], group: 13, period: 4, color: 'bg-lime-400' },
            { s: 'Ge', n: 'Germanium', z: 32, m: 73, shells: [2, 8, 18, 4], group: 14, period: 4, color: 'bg-green-700' },
            { s: 'As', n: 'Arsenic', z: 33, m: 75, shells: [2, 8, 18, 5], group: 15, period: 4, color: 'bg-blue-400' },
            { s: 'Se', n: 'Selenium', z: 34, m: 79, shells: [2, 8, 18, 6], group: 16, period: 4, color: 'bg-pink-400' },
            { s: 'Br', n: 'Bromine', z: 35, m: 80, shells: [2, 8, 18, 7], group: 17, period: 4, color: 'bg-cyan-400' },
            { s: 'Kr', n: 'Krypton', z: 36, m: 84, shells: [2, 8, 18, 8], group: 18, period: 4, color: 'bg-indigo-400' },
        ];

        // --- State Management ---
        let selectedElement1 = null;
        let selectedElement2 = null;
        let activeSlot = 1; // 1 or 2

        // --- Utility Functions ---

        /**
         * Maps the original group number to the condensed grid column (1-8).
         * Used to skip the space for transition metals (groups 3-12).
         */
        const getGridColumn = (originalGroup) => {
            if (originalGroup <= 2) return originalGroup;
            if (originalGroup >= 13) return originalGroup - 10;
            return null;
        };

        // --- Rendering Functions ---

        /**
         * Renders the Bohr Model SVG content.
         */
        const renderBohrModel = (element, containerId) => {
            const container = document.getElementById(containerId);
            if (!element) {
                container.innerHTML = `
                    <div class="flex flex-col items-center justify-center w-full h-full text-gray-400 italic min-h-[200px] md:min-h-[250px]">
                        <svg class="w-12 h-12 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 8h16M4 16h16" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4v16" />
                        </svg>
                        <span class="mt-2 text-sm">Select element</span>
                    </div>
                `;
                return;
            }

            const { shells, n, z } = element;
            const MAX_SHELLS = 4;
            const maxRadius = 140;
            const coreRadius = 18;
            const electronRadius = 4;
            const radialIncrement = (maxRadius - coreRadius) / MAX_SHELLS;
            const pairOffset = 0.08;
            
            const shellRadii = shells.map((_, index) => coreRadius + (index + 1) * radialIncrement);
            let positions = [];
            let svgContent = '';

            // 1. Calculate Electron Positions
            shells.forEach((electronCount, shellIndex) => {
                const r = shellRadii[shellIndex];

                if (shellIndex === 0) { // K-shell
                    if (electronCount >= 1) positions.push({ x: r * Math.cos(Math.PI / 2), y: r * Math.sin(Math.PI / 2) });
                    if (electronCount === 2) positions.push({ x: r * Math.cos(3 * Math.PI / 2), y: r * Math.sin(3 * Math.PI / 2) });
                } else {
                    // General pairing logic for L, M, N... shells
                    const maxPairs = 4;
                    const numPairs = Math.ceil(electronCount / 2);
                    const pairSeparation = 2 * Math.PI / Math.min(maxPairs, numPairs);

                    for (let i = 0; i < electronCount; i++) {
                        const isSecondInPair = i % 2 !== 0;
                        const pairIndex = Math.floor(i / 2);
                        const baseAngle = pairIndex * pairSeparation + (shellIndex * 0.1) + Math.PI / 4;
                        const angle = baseAngle + (isSecondInPair ? pairOffset : -pairOffset);

                        const x = r * Math.cos(angle);
                        const y = r * Math.sin(angle);
                        positions.push({ x, y });
                    }
                }
            });

            // 2. Build SVG String
            svgContent += `
                <h3 class="text-lg font-bold text-gray-800 mb-1">${n} (${z})</h3>
                <div class="text-xs font-medium text-indigo-600 mb-3">
                    Shells: ${shells.join(', ')}
                </div>
                <svg viewBox="0 0 300 300" class="w-full h-auto max-w-[250px] no-select">
                    <g transform="translate(150, 150)">
            `;

            // Orbits
            shellRadii.forEach(r => {
                svgContent += `<circle cx="0" cy="0" r="${r}" class="orbit" />`;
            });

            // Nucleus
            svgContent += `
                <circle cx="0" cy="0" r="${coreRadius}" class="nucleus" />
                <text x="0" y="3" text-anchor="middle" class="text-base font-bold fill-white">${z}</text>
                <text x="0" y="16" text-anchor="middle" class="text-[9px] font-medium fill-white">Protons</text>
            `;

            // Electrons
            positions.forEach(pos => {
                svgContent += `<circle cx="${pos.x}" cy="${pos.y}" r="${electronRadius}" class="electron shadow-lg" />`;
            });

            svgContent += `
                    </g>
                </svg>
            `;

            container.innerHTML = svgContent;
        };

        /**
         * Renders the main periodic table grid structure.
         */
        const renderPeriodicTable = () => {
            const gridContainer = document.getElementById('periodic-table-grid');
            let gridHtml = '';

            // Set up the CSS Grid container properties
            gridHtml += `
                <div style="display: grid; grid-template-columns: repeat(8, minmax(35px, 1fr)); grid-template-rows: repeat(5, auto); width: 100%; min-width: 320px;" class="gap-0.5">
            `;

            // Group Headers (Row 1) - Condensed 8 columns
            gridHtml += `
                <div style="grid-row: 1; grid-column: 1;" class="col-start-1 text-center text-[10px] font-bold text-gray-500">1</div>
                <div style="grid-row: 1; grid-column: 2;" class="col-start-2 text-center text-[10px] font-bold text-gray-500">2</div>
                <div style="grid-row: 1; grid-column: 3;" class="col-start-3 text-center text-[10px] font-bold text-gray-500">13</div>
                <div style="grid-row: 1; grid-column: 4 / 8;" class="col-start-4 col-span-4 text-center text-[8px] font-bold text-gray-400 flex items-center justify-center">
                    (Transition Metals Skipped)
                </div>
                <div style="grid-row: 1; grid-column: 8;" class="col-start-8 text-center text-[10px] font-bold text-gray-500">18</div>
            `;

            // Row Headers (Periods, Column 1)
            [1, 2, 3, 4].forEach(p => {
                gridHtml += `
                    <div class="text-right pr-1 text-[10px] font-bold text-gray-500 flex items-center justify-end"
                         style="grid-column: 1; grid-row: ${p + 1};">
                        ${p}
                    </div>
                `;
            });

            // Render Tiles
            elementsData.forEach(e => {
                const gridCol = getGridColumn(e.group);
                if (gridCol === null) return; // Skip if it's a transition metal (shouldn't happen with this data)

                const isDark = e.color.includes('600') || e.color.includes('700');
                const textColor = isDark ? 'text-white' : 'text-gray-900';

                let ringClass = '';
                const isSelected1 = selectedElement1?.z === e.z;
                const isSelected2 = selectedElement2?.z === e.z;

                if (isSelected1 && isSelected2) {
                    ringClass = 'selected ring-both scale-[1.05] z-10';
                } else if (isSelected1) {
                    ringClass = 'selected ring-slot-1 scale-[1.05] z-10';
                } else if (isSelected2) {
                    ringClass = 'selected ring-slot-2 scale-[1.05] z-10';
                }

                gridHtml += `
                    <div style="grid-column: ${gridCol}; grid-row: ${e.period + 1};" data-z="${e.z}">
                        <div class="element-tile p-0.5 h-10 sm:h-12 rounded-md border-2 border-transparent 
                                    flex flex-col justify-between items-center text-center text-xs
                                    ${e.color} ${textColor} ${ringClass}"
                             onclick="handleElementSelect(${e.z})">
                            <span class="text-[7px] font-semibold self-start ml-0.5 text-gray-700">${e.z}</span>
                            <span class="text-base sm:text-lg font-extrabold ${textColor} -mt-0.5">${e.s}</span>
                            <div class="text-[6px] sm:text-[8px] font-medium w-full truncate">
                                <span class="block">${e.m}</span>
                            </div>
                        </div>
                    </div>
                `;
            });

            // Empty cells for the first row (H and He positioning)
            gridHtml += `
                <div style="grid-column: 2 / 8; grid-row: 2;" class="h-10 sm:h-12 flex items-center justify-center"></div>
            `;
            
            gridHtml += '</div>';
            gridContainer.innerHTML = gridHtml;
        };

        /**
         * Updates the active slot indicator and the swap button state.
         */
        const updateUIState = () => {
            const label = document.getElementById('active-slot-label');
            const swapButton = document.getElementById('swap-button');

            const slotLabel = `Slot ${activeSlot}`;
            const slotColorClass = activeSlot === 1 ? 'text-yellow-700' : 'text-green-700';
            const activeBgClass = activeSlot === 1 ? 'bg-yellow-100 border-yellow-400' : 'bg-green-100 border-green-400';

            label.className = `font-extrabold px-3 py-1 rounded-full text-sm shadow-inner ${slotColorClass} ${activeBgClass}`;
            label.textContent = slotLabel;

            swapButton.disabled = (!selectedElement1 && !selectedElement2);
        };

        /**
         * Main render function, called after every state change.
         */
        const updateUI = () => {
            renderPeriodicTable();
            renderBohrModel(selectedElement1, 'bohr-model-1');
            renderBohrModel(selectedElement2, 'bohr-model-2');
            updateUIState();
        };

        // --- Event Handlers ---

        window.handleElementSelect = (z) => {
            const element = elementsData.find(e => e.z === z);
            if (!element) return;

            if (activeSlot === 1) {
                selectedElement1 = element;
                activeSlot = 2;
            } else {
                selectedElement2 = element;
                activeSlot = 1;
            }
            updateUI();
        };

        const handleSwap = () => {
            const temp = selectedElement1;
            selectedElement1 = selectedElement2;
            selectedElement2 = temp;
            
            // Retain the active slot index (1 or 2), but swap the element content
            updateUI();
        };

        // --- Initialization ---
        window.onload = () => {
            document.getElementById('swap-button').addEventListener('click', handleSwap);
            updateUI(); // Initial rendering
        };
    </script>
</body>
</html>