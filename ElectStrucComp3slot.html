<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atomic Comparison: Quantum Jitter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .element-tile { transition: all 0.2s; cursor: pointer; }
        .element-tile:hover:not(.selected) { border-color: #9ca3af; transform: translateY(-1px); }
        .ring-left { box-shadow: 0 0 0 4px #fbbf24; border-color: #b45309; }
        .ring-middle { box-shadow: 0 0 0 4px #a855f7; border-color: #6b21a8; }
        .ring-right { box-shadow: 0 0 0 4px #4ade80; border-color: #065f46; }
        .no-select { user-select: none; }
        canvas { width: 100%; height: auto; max-width: 250px; touch-action: none; }
        .table-grid {
            display: grid;
            grid-template-columns: repeat(8, minmax(0, 1fr));
            gap: 4px;
            max-width: 600px;
            margin: 0 auto;
        }
    </style>
</head>
<body class="bg-slate-50 p-2 md:p-6 overflow-x-hidden">

    <div id="app" class="max-w-[1400px] w-full mx-auto flex flex-col items-center">
        <header class="text-center mb-6 w-full">
            <h1 class="text-3xl font-black text-slate-800 tracking-tight mb-1">Atomic Comparison Lab</h1>
            <p class="text-slate-500 text-sm font-medium italic">High Contrast Shells & Green Translucent Neutrons</p>
        </header>

        <main class="w-full flex flex-col gap-6">
            <section class="bg-white p-6 rounded-3xl shadow-sm border border-slate-200 w-full no-select overflow-x-auto">
                <div class="flex items-center justify-between mb-6 px-2">
                    <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest">Select Element for:</h3>
                    <div id="active-target-display" class="font-black px-6 py-2 rounded-xl text-sm shadow-sm transition-all duration-300">
                        Left Atom
                    </div>
                </div>
                <div id="periodic-table-grid" class="table-grid"></div>
            </section>

            <section class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white p-6 rounded-3xl shadow-md border-t-8 border-yellow-400 flex flex-col items-center min-h-[400px]">
                    <div id="info-left" class="text-center h-16 flex flex-col justify-center mb-4 w-full"></div>
                    <canvas id="canvas-left" width="400" height="400"></canvas>
                </div>

                <div class="bg-white p-6 rounded-3xl shadow-md border-t-8 border-purple-400 flex flex-col items-center min-h-[400px]">
                    <div id="info-middle" class="text-center h-16 flex flex-col justify-center mb-4 w-full"></div>
                    <canvas id="canvas-middle" width="400" height="400"></canvas>
                </div>
                
                <div class="bg-white p-6 rounded-3xl shadow-md border-t-8 border-green-400 flex flex-col items-center min-h-[400px]">
                    <div id="info-right" class="text-center h-16 flex flex-col justify-center mb-4 w-full"></div>
                    <canvas id="canvas-right" width="400" height="400"></canvas>
                </div>
            </section>
        </main>
    </div>

    <script>
        const elementsData = [
            { s: 'H', n: 'Hydrogen', z: 1, m: 1.01, shells: [1], dg: 1, p: 1, c: 'bg-emerald-50' },
            { s: 'He', n: 'Helium', z: 2, m: 4.00, shells: [2], dg: 8, p: 1, c: 'bg-blue-50' },
            { s: 'Li', n: 'Lithium', z: 3, m: 6.94, shells: [2, 1], dg: 1, p: 2, c: 'bg-red-50' },
            { s: 'Be', n: 'Beryllium', z: 4, m: 9.01, shells: [2, 2], dg: 2, p: 2, c: 'bg-orange-50' },
            { s: 'B', n: 'Boron', z: 5, m: 10.81, shells: [2, 3], dg: 3, p: 2, c: 'bg-yellow-50' },
            { s: 'C', n: 'Carbon', z: 6, m: 12.01, shells: [2, 4], dg: 4, p: 2, c: 'bg-slate-100' },
            { s: 'N', n: 'Nitrogen', z: 7, m: 14.01, shells: [2, 5], dg: 5, p: 2, c: 'bg-blue-50' },
            { s: 'O', n: 'Oxygen', z: 8, m: 16.00, shells: [2, 6], dg: 6, p: 2, c: 'bg-blue-50' },
            { s: 'F', n: 'Fluorine', z: 9, m: 19.00, shells: [2, 7], dg: 7, p: 2, c: 'bg-blue-50' },
            { s: 'Ne', n: 'Neon', z: 10, m: 20.18, shells: [2, 8], dg: 8, p: 2, c: 'bg-blue-50' },
            { s: 'Na', n: 'Sodium', z: 11, m: 22.99, shells: [2, 8, 1], dg: 1, p: 3, c: 'bg-red-50' },
            { s: 'Mg', n: 'Magnesium', z: 12, m: 24.31, shells: [2, 8, 2], dg: 2, p: 3, c: 'bg-orange-50' },
            { s: 'Al', n: 'Aluminium', z: 13, m: 26.98, shells: [2, 8, 3], dg: 3, p: 3, c: 'bg-yellow-50' },
            { s: 'Si', n: 'Silicon', z: 14, m: 28.09, shells: [2, 8, 4], dg: 4, p: 3, c: 'bg-slate-100' },
            { s: 'P', n: 'Phosphorus', z: 15, m: 30.97, shells: [2, 8, 5], dg: 5, p: 3, c: 'bg-blue-50' },
            { s: 'S', n: 'Sulfur', z: 16, m: 32.06, shells: [2, 8, 6], dg: 6, p: 3, c: 'bg-blue-50' },
            { s: 'Cl', n: 'Chlorine', z: 17, m: 35.45, shells: [2, 8, 7], dg: 7, p: 3, c: 'bg-blue-50' },
            { s: 'Ar', n: 'Argon', z: 18, m: 39.95, shells: [2, 8, 8], dg: 8, p: 3, c: 'bg-blue-50' },
            { s: 'K', n: 'Potassium', z: 19, m: 39.10, shells: [2, 8, 8, 1], dg: 1, p: 4, c: 'bg-red-50' },
            { s: 'Ca', n: 'Calcium', z: 20, m: 40.08, shells: [2, 8, 8, 2], dg: 2, p: 4, c: 'bg-orange-50' },
            { s: 'Ga', n: 'Gallium', z: 31, m: 69.72, shells: [2, 8, 18, 3], dg: 3, p: 4, c: 'bg-yellow-50' },
            { s: 'Ge', n: 'Germanium', z: 32, m: 72.63, shells: [2, 8, 18, 4], dg: 4, p: 4, c: 'bg-slate-100' },
            { s: 'As', n: 'Arsenic', z: 33, m: 74.92, shells: [2, 8, 18, 5], dg: 5, p: 4, c: 'bg-blue-50' },
            { s: 'Se', n: 'Selenium', z: 34, m: 78.96, shells: [2, 8, 18, 6], dg: 6, p: 4, c: 'bg-blue-50' },
            { s: 'Br', n: 'Bromine', z: 35, m: 79.90, shells: [2, 8, 18, 7], dg: 7, p: 4, c: 'bg-blue-50' },
            { s: 'Kr', n: 'Krypton', z: 36, m: 83.80, shells: [2, 8, 18, 8], dg: 8, p: 4, c: 'bg-blue-50' },
        ];

        let state = {
            leftAtom: null,
            middleAtom: null,
            rightAtom: null,
            activeTarget: 'left',
            time: 0
        };

        const generateNucleus = (z, m) => {
            const particles = [];
            const count = Math.round(m);
            for (let i = 0; i < count; i++) {
                const isProton = i < z;
                const phi = Math.acos(-1 + (2 * i) / count);
                const theta = Math.sqrt(count * Math.PI) * phi;
                const r = Math.pow(Math.random(), 0.5) * 14;
                particles.push({
                    type: isProton ? 'proton' : 'neutron',
                    ox: Math.cos(theta) * r,
                    oy: Math.sin(theta) * r,
                    phase: Math.random() * Math.PI * 2,
                    zIndex: Math.random()
                });
            }
            return particles.sort((a, b) => a.zIndex - b.zIndex);
        };

        const drawAtom = (ctx, element, time) => {
            if (!element) return;
            const cx = 200, cy = 200;
            
            // Draw Shell Paths - DARKER and THICKER
            ctx.strokeStyle = '#cbd5e1'; // Darker grey (slate-300)
            ctx.lineWidth = 2.5;         // Thicker line
            element.shells.forEach((_, i) => {
                const r = 40 + (i * 35);
                ctx.beginPath();
                ctx.arc(cx, cy, r, 0, Math.PI * 2);
                ctx.stroke();
            });

            // Draw Nucleus
            if (!element.nucleusParticles) {
                element.nucleusParticles = generateNucleus(element.z, element.m);
            }
            element.nucleusParticles.forEach(p => {
                const jitterX = Math.sin(time * 15 + p.phase) * 0.9;
                const jitterY = Math.cos(time * 13 + p.phase) * 0.9;
                
                if (p.type === 'proton') {
                    ctx.fillStyle = '#ef4444'; 
                    ctx.globalAlpha = 1.0;
                } else {
                    ctx.fillStyle = '#22c55e'; 
                    ctx.globalAlpha = 0.75;    
                }
                
                ctx.beginPath();
                ctx.arc(cx + p.ox + jitterX, cy + p.oy + jitterY, 4.5, 0, Math.PI * 2);
                ctx.fill();
                ctx.globalAlpha = 1.0; 
            });

            // Draw Electrons
            element.shells.forEach((count, sIdx) => {
                const r = 40 + (sIdx * 35);
                const angles = [];
                
                if (sIdx === 0) {
                    for (let i = 0; i < count; i++) {
                        angles.push((i * (Math.PI * 2 / count)) - (Math.PI / 2));
                    }
                } else {
                    const pairOffset = 0.15;
                    for (let i = 0; i < count; i++) {
                        const pairIndex = Math.floor(i / 2);
                        const isSecondOfPair = i % 2 === 1;
                        const baseAngle = (pairIndex * (Math.PI / 2)) - (Math.PI / 2);
                        angles.push(baseAngle + (isSecondOfPair ? pairOffset : -pairOffset));
                    }
                }

                angles.forEach((angle, i) => {
                    const jX = Math.sin(time * 40 + (sIdx * 10) + i) * 1.5;
                    const jY = Math.cos(time * 45 + (sIdx * 10) + i) * 1.5;

                    const ex = cx + Math.cos(angle) * r + jX;
                    const ey = cy + Math.sin(angle) * r + jY;

                    const grad = ctx.createRadialGradient(ex, ey, 0, ex, ey, 8);
                    grad.addColorStop(0, 'rgba(6, 182, 212, 0.5)');
                    grad.addColorStop(1, 'rgba(6, 182, 212, 0)');
                    ctx.fillStyle = grad;
                    ctx.beginPath();
                    ctx.arc(ex, ey, 8, 0, Math.PI * 2);
                    ctx.fill();

                    ctx.fillStyle = '#ffffff';
                    ctx.beginPath();
                    ctx.arc(ex, ey, 3.5, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.strokeStyle = '#0891b2';
                    ctx.lineWidth = 1.5;
                    ctx.stroke();
                });
            });
        };

        const renderTable = () => {
            const container = document.getElementById('periodic-table-grid');
            let html = '';
            elementsData.forEach(e => {
                const isLeft = state.leftAtom?.z === e.z;
                const isMiddle = state.middleAtom?.z === e.z;
                const isRight = state.rightAtom?.z === e.z;
                let ring = '';
                if (isLeft) ring += ' ring-left scale-110 z-30';
                if (isMiddle) ring += ' ring-middle scale-110 z-30';
                if (isRight) ring += ' ring-right scale-110 z-30';
                html += `
                    <div style="grid-column: ${e.dg}; grid-row: ${e.p};" 
                         class="element-tile p-1 h-14 rounded-lg border border-slate-200 ${e.c} ${ring} flex flex-col items-center justify-center relative no-select"
                         onclick="selectElement(${e.z})">
                        <span class="text-[9px] font-black text-slate-400 absolute top-0.5 left-1.5">${e.z}</span>
                        <span class="text-lg font-black leading-tight text-slate-700">${e.s}</span>
                        <span class="text-[7px] font-bold text-slate-400 uppercase">${e.m.toFixed(1)}</span>
                    </div>
                `;
            });
            container.innerHTML = html;
        };

        const selectElement = (z) => {
            const el = JSON.parse(JSON.stringify(elementsData.find(e => e.z === z)));
            if (state.activeTarget === 'left') {
                state.leftAtom = el;
                state.activeTarget = 'middle';
            } else if (state.activeTarget === 'middle') {
                state.middleAtom = el;
                state.activeTarget = 'right';
            } else {
                state.rightAtom = el;
                state.activeTarget = 'left';
            }
            updateUI();
        };

        const updateUI = () => {
            const targetDisplay = document.getElementById('active-target-display');
            if (state.activeTarget === 'left') {
                targetDisplay.textContent = 'Active: Left Slot';
                targetDisplay.className = 'font-black px-6 py-2 rounded-xl text-sm shadow-sm bg-yellow-100 border border-yellow-300 text-yellow-700';
            } else if (state.activeTarget === 'middle') {
                targetDisplay.textContent = 'Active: Middle Slot';
                targetDisplay.className = 'font-black px-6 py-2 rounded-xl text-sm shadow-sm bg-purple-100 border border-purple-300 text-purple-700';
            } else {
                targetDisplay.textContent = 'Active: Right Slot';
                targetDisplay.className = 'font-black px-6 py-2 rounded-xl text-sm shadow-sm bg-green-100 border border-green-300 text-green-700';
            }
            const renderInfo = (el, fallback) => el ? `
                <div class="font-black text-2xl text-slate-800 leading-none">${el.n}</div>
                <div class="text-[10px] font-black text-slate-400 tracking-widest uppercase mt-2">
                    Atomic Number: ${el.z} â€¢ Mass: ${el.m.toFixed(2)}
                </div>
            ` : `<span class="text-slate-300 italic text-sm font-medium tracking-tight">${fallback}</span>`;
            document.getElementById('info-left').innerHTML = renderInfo(state.leftAtom, 'Select Left Atom');
            document.getElementById('info-middle').innerHTML = renderInfo(state.middleAtom, 'Select Middle Atom');
            document.getElementById('info-right').innerHTML = renderInfo(state.rightAtom, 'Select Right Atom');
            renderTable();
        };

        const animate = () => {
            state.time += 0.012;
            ['left', 'middle', 'right'].forEach(pos => {
                const canvas = document.getElementById(`canvas-${pos}`);
                if (canvas) {
                    const ctx = canvas.getContext('2d');
                    ctx.clearRect(0, 0, 400, 400);
                    drawAtom(ctx, state[`${pos}Atom`], state.time);
                }
            });
            requestAnimationFrame(animate);
        };

        window.onload = () => {
            renderTable();
            updateUI();
            animate();
        };
    </script>
</body>
</html>